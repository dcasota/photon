diff --git a/src/lstate.c b/src/lstate.c
index c1a7664..80d02fa 100644
--- a/src/lstate.c
+++ b/src/lstate.c
@@ -244,6 +244,7 @@ static void close_state (lua_State *L) {
   luaF_close(L, L->stack);  /* close all upvalues for this thread */
   luaC_freeallobjects(L);  /* collect all objects */
   if (g->version)  /* closing a fully built state? */
+    L->ci = &L->base_ci;  /* unwind CallInfo list */
     luai_userstateclose(L);
   luaM_freearray(L, G(L)->strt.hash, G(L)->strt.size);
   freestack(L);
