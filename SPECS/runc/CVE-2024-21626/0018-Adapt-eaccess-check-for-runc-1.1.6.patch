From: Shengjing Zhu <zhsj@debian.org>
Date: Fri, 2 Feb 2024 22:14:14 +0800
Subject: Adapt eaccess check for runc < 1.1.6

The check is same in libcontainer/standard_init_linux.go
---
 libcontainer/setns_init_linux.go | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

diff --git a/libcontainer/setns_init_linux.go b/libcontainer/setns_init_linux.go
index d1bb122..dca44ca 100644
--- a/libcontainer/setns_init_linux.go
+++ b/libcontainer/setns_init_linux.go
@@ -91,11 +91,10 @@ func (l *linuxSetnsInit) Init() error {
 	if err != nil {
 		return err
 	}
-	// exec.LookPath in Go < 1.20 might return no error for an executable
-	// residing on a file system mounted with noexec flag, so perform this
-	// extra check now while we can still return a proper error.
-	// TODO: remove this once go < 1.20 is not supported.
-	if err := eaccess(name); err != nil {
+	// exec.LookPath might return no error for an executable residing on a
+	// file system mounted with noexec flag, so perform this extra check
+	// now while we can still return a proper error.
+	if err := system.Eaccess(name); err != nil {
 		return &os.PathError{Op: "eaccess", Path: name, Err: err}
 	}
 
