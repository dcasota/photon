From 3c54033634ae537b52582900a7ba432c52ae8174 Mon Sep 17 00:00:00 2001
From: Patrick Griffis <pgriffis@igalia.com>
Date: Mon, 16 Sep 2024 13:56:09 -0500
Subject: [PATCH] Define GLIB_VERSION_MAX_ALLOWED and GLIB_VERSION_MIN_REQUIRED

Signed-off-by: Shivani Agarwal <shivani.agarwal@broadcom.com>
---
 meson.build          | 3 +++
 tests/hsts-db-test.c | 3 ++-
 tests/proxy-test.c   | 3 ++-
 3 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/meson.build b/meson.build
index cdf9ad6..a0c303f 100644
--- a/meson.build
+++ b/meson.build
@@ -112,6 +112,9 @@ glib_deps = [glib_dep, gmodule_dep, gobject_dep, gio_dep]
 
 cdata = configuration_data()
 
+cdata.set('GLIB_VERSION_MAX_ALLOWED', 'GLIB_VERSION_2_70')
+cdata.set('GLIB_VERSION_MIN_REQUIRED', 'GLIB_VERSION_2_70')
+
 libnghttp2_dep = dependency('libnghttp2')
 if cc.has_function('nghttp2_option_set_no_rfc9113_leading_and_trailing_ws_validation', prefix : '#include <nghttp2/nghttp2.h>', dependencies : libnghttp2_dep)
     cdata.set('HAVE_NGHTTP2_OPTION_SET_NO_RFC9113_LEADING_AND_TRAILING_WS_VALIDATION', '1')
diff --git a/tests/hsts-db-test.c b/tests/hsts-db-test.c
index 1149a04..04d7c4f 100644
--- a/tests/hsts-db-test.c
+++ b/tests/hsts-db-test.c
@@ -1,8 +1,9 @@
+#include "test-utils.h"
+
 #include <glib.h>
 #include <glib/gstdio.h>
 
 #include <stdio.h>
-#include "test-utils.h"
 #include "soup-uri-utils-private.h"
 
 #define DB_FILE "hsts-db.sqlite"
diff --git a/tests/proxy-test.c b/tests/proxy-test.c
index ec03936..d730c8a 100644
--- a/tests/proxy-test.c
+++ b/tests/proxy-test.c
@@ -1,8 +1,9 @@
 /* -*- Mode: C; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 8 -*- */
 
-#include <gio/gio.h>
 #include "test-utils.h"
 
+#include <gio/gio.h>
+
 typedef struct {
 	const char *explanation;
 	const char *url;
-- 
2.39.4

